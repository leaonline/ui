<template name="taskPageRenderer">
    {{#unless loadComplete}}
        {{> loading title="unit.title"}}
    {{else}}
        {{#with unitDoc}}
            {{#with this.stimuli}}
                <div class="card my-2">
                    <div class="card-body row">
                        {{#each stimuli in this}}
                            <div class="col-12 col-md-{{stimuli.width}} mx-auto p-1 element-container">
                                {{> TaskRendererFactory content=stimuli type=currentType}}
                            </div>
                        {{/each}}
                    </div>
                </div>
            {{/with}}

            {{#with (currentInstructions unitDoc)}}
                <div class="card my-2">
                    <div class="card-body d-flex align-items-center">
							<span class="w-100 row">
                                {{#each instruction in this}}
                                    <div class="col-12 col-md-{{instruction.width}} mx-auto p-1 element-container">
                                        {{> TaskRendererFactory content=instruction type=currentType}}
                                    </div>
                                {{/each}}
                            </span>
                        <span class="text-light">
								<i class="fa fas fa-fw fa-3x fa-info"></i>
							</span>
                    </div>
                </div>
            {{/with}}

            <div class="card my-4 lea-unit-current-content-container border-gray">
                <div class="card-header bg-transparent border-0 p-0 d-flex justify-content-center">
                                <span class="text-white bg-gray px-3 py-1 trapezoid">{{currentPageCount}}
                                    / {{maxPages}}</span>
                </div>
                {{#with currentPage}}
                    <div class="card-body row w-100 h-100 lea-unit-current-content">
                        {{#each pageContent in this.content}}
                            <div class="col-12 col-md-{{pageContent.width}} mx-auto p-1 element-container lea-text">
                                {{> TaskRendererFactory content=(itemData pageContent) type=currentType}}
                            </div>
                        {{/each}}
                    </div>
                    <div class="card-body d-flex justify-content-between align-items-center">
                        {{#if hasPrev}}
                            {{> actionButton type=currentType outline=true tts="common.back" btnClass="lea-pagenav-button"
                                    data-action="back" type=currentType
                                    label=(i18n "common.forward") class="ml-auto"}}
                        {{/if}}
                        {{#if hasNext}}
                            <button class="btn  btn-outline-{{currentType}} lea-pagenav-button ml-auto"
                                    data-action="next">
                                <i class="fa fas fa-fw fa-arrow-right"></i>
                            </button>
                        {{/if}}
                    </div>
                {{/with}}
            </div>

            {{#if showFinishButton}}
                <div class="card-body d-flex justify-content-center">
                    {{> actionButton type=currentType tts="common.finish" btnClass="lea-pagenav-finish-button"
                            type=currentType class="lea-unit-finish-group"
                            icon="arrow-right" iconPos="right" label=(i18n "common.finish") }}
                </div>
            {{/if}}
        {{/with}}
    {{/unless}}
</template>